# abort script on any command that exits with a non zero value
set -e

PACKAGING_ROOT=`pwd`
PYTHON_VERSION=2.7.8

cd ${PACKAGING_ROOT}/python
tar xfz Python-${PYTHON_VERSION}.tgz
cd Python-${PYTHON_VERSION}
./configure  --prefix=${BOSH_INSTALL_TARGET}/python
make
make install

cd ${PACKAGING_ROOT}/python
tar -xzf setuptools-14.3.tar.gz
cd setuptools-14.3/
/var/vcap/packages/curator/python/bin/python setup.py install

cd ${PACKAGING_ROOT}/python
tar -xzf pip-6.0.8.tar.gz
cd pip-6.0.8/
/var/vcap/packages/curator/python/bin/python setup.py install

cd ${PACKAGING_ROOT}/curator
/var/vcap/packages/curator/python/bin/pip install urllib3-1.8.3.tar.gz
/var/vcap/packages/curator/python/bin/pip install elasticsearch-py.zip
/var/vcap/packages/curator/python/bin/pip install click-3.3.tar.gz
/var/vcap/packages/curator/python/bin/pip install curator-3.1.0.zip
